<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<AnchorPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" fx:controller="com.instantnotificationsystem.controller.UserDashboardController" stylesheets="@../css/user_dashboard.css" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
    <BorderPane style="-fx-background-color: #f9fafb;" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">

        <!-- Top Header -->
        <top>
            <AnchorPane>
                <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header-background" AnchorPane.topAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
                    <padding>
                        <Insets bottom="15.0" left="30.0" right="30.0" top="15.0" />
                    </padding>
                    <Label text="INSTANT NOTIFICATION SYSTEM" styleClass="header-text" />
                    <Region HBox.hgrow="ALWAYS"/>
                </HBox>
                <HBox alignment="CENTER" spacing="25" AnchorPane.topAnchor="15.0" AnchorPane.rightAnchor="30.0">
                    <VBox alignment="CENTER_RIGHT">
                        <Label fx:id="welcomeLabel" text="Welcome" styleClass="header-text"/>
                    </VBox>
                    <Button fx:id="btnLogout" text="ðŸšª  Logout" onAction="#handleLogout" maxWidth="Infinity" alignment="BASELINE_LEFT" styleClass="sidebar-button-logout"/>
                </HBox>
            </AnchorPane>
        </top>

        <!-- Main Content -->
        <center>
            <AnchorPane>
                <VBox spacing="25" alignment="TOP_CENTER" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" style="-fx-padding: 30;">
                    <!-- Smart Cards Navigation -->
                    <HBox spacing="20" alignment="CENTER">
                        <VBox fx:id="dashboardCard" onMouseClicked="#handleDashboard" styleClass="smart-card" HBox.hgrow="ALWAYS">
                            <Label text="ðŸ“Š" styleClass="card-icon"/>
                            <Label text="Dashboard" styleClass="card-title"/>
                        </VBox>
                        <StackPane fx:id="notificationsCard" onMouseClicked="#handleNotifications" styleClass="smart-card" HBox.hgrow="ALWAYS">
                            <VBox alignment="CENTER" spacing="5">
                                <Label text="ðŸ””" styleClass="card-icon"/>
                                <Label text="Notifications" styleClass="card-title"/>
                            </VBox>
                            <StackPane fx:id="notificationBadgeContainer" StackPane.alignment="TOP_RIGHT" translateX="10" translateY="-10" visible="false">
                                <Circle radius="12" styleClass="notification-badge-circle"/>
                                <Label fx:id="notificationBadge" text="0" styleClass="notification-badge-label"/>
                            </StackPane>
                        </StackPane>
                        <VBox fx:id="historyCard" onMouseClicked="#handleHistory" styleClass="smart-card" HBox.hgrow="ALWAYS">
                            <Label text="ðŸ“©" styleClass="card-icon"/>
                            <Label text="History" styleClass="card-title"/>
                        </VBox>
                    </HBox>

                    <StackPane VBox.vgrow="ALWAYS">
                        <!-- User Profile View -->
                        <ScrollPane fx:id="profileView" fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;">
                            <VBox alignment="CENTER" styleClass="stat-card" maxWidth="800">
                                <GridPane hgap="20" vgap="15" style="-fx-padding: 20;">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="SOMETIMES" minWidth="100" />
                                        <ColumnConstraints hgrow="ALWAYS" />
                                    </columnConstraints>
                                    <Label text="ðŸ¢ Department" styleClass="profile-header" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                    <ComboBox fx:id="cmbDepartment" promptText="Select Department" styleClass="profile-data" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                                    <Label text="ðŸ’¼ Role" styleClass="profile-header" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                    <ComboBox fx:id="roleComboBox" promptText="Select Role" styleClass="profile-data" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                                    <Label text="âš§ Gender" styleClass="profile-header" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                    <ComboBox fx:id="cmbGender" promptText="Select Gender" styleClass="profile-data" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                                    <Label text="â° Current Shift" styleClass="profile-header" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                    <ComboBox fx:id="cmbShift" promptText="Select Shift" styleClass="profile-data" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
                                </GridPane>
                                <Button text="Update Profile" onAction="#handleUpdateProfile" style="-fx-background-color: #0a4a25; -fx-text-fill: white;" HBox.hgrow="ALWAYS" maxWidth="Infinity">
                                    <VBox.margin>
                                        <Insets top="20" bottom="20" left="20" right="20" />
                                    </VBox.margin>
                                </Button>
                            </VBox>
                        </ScrollPane>

                        <!-- Notifications/History View -->
                        <VBox fx:id="notificationsView" styleClass="notifications-view" VBox.vgrow="ALWAYS" spacing="15">
                            <Label fx:id="listTitle" text="All Notifications" styleClass="header-text" />
                            <ListView fx:id="notificationsListView" styleClass="notifications-list-view" VBox.vgrow="ALWAYS" prefHeight="550" />
                        </VBox>
                    </StackPane>
                </VBox>
            </AnchorPane>
        </center>
    </BorderPane>
</AnchorPane>
